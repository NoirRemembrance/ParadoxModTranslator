# ModTranslator

## üìÑ Introduction
This is a tool designed to automate the translation of Paradox game mods using LLM APIs. While it has been primarily tested with Stellaris mods, it should work with other Paradox games that follow a similar localization file structure.

This tool is designed to work with ".yml" localization files, which store the text and dialogs used in the game.

*Note: For clarity, this guide will refer to the language you are translating from as "Original Language" and the language you are translating to as "New Language".*

## ‚úÖ Requirements
To use this tool, ensure your system meets the following requirements:
- Operating System: Windows 10 or later.
- .NET Desktop Runtime: Version 8.0 or later.
    - You can download it from the official .NET website: [Download .NET Runtime](https://dotnet.microsoft.com/download/dotnet/8.0)
- Access to an LLM API.

## üìå How to Use

### ‚öôÔ∏è Setup

1. Download the release build.
2. Open the appsettings.json file.
3. Set your API details.
4. Adjust settings like MaxConcurrentRequests, MaxLengthOfRequests, and TimeoutSeconds to suit your needs.

---

### 1Ô∏è‚É£ Generate Files for Translation
Prepare files for translation, ensuring that only missing keys are included:

1. Upload the files from the Original Language. (Optionally, include files from the New Language to detect missing keys.)
2. Set the "From Language" and "To Language" to the appropriate values.
3. Click "Generate".

#### üìå How it works:
- The tool reads the original language files line by line, extracting each key and its value.
- If new language files are provided, it compares the keys and only includes missing keys in the generated files.
- The generated files are saved in:
    "RootFolderOfTheTranslationTool/Files/ToBeTranslated/"

---

### 2Ô∏è‚É£ Translate Files
Automatically translate the generated files using the configured LLM API:

1. Upload the generated files from the Generate Files function.
2. Click "Translate".

#### üìå How it works:
- The tool will read each uploaded file line by line, storing the lines in a list.
- It will then check if a translated file already exists for that file.
    - If a translated file exists, it will read the file and compare the keys of the new file with the existing one.
    - Already translated lines will be skipped, preventing them from being translated again.
- The remaining untranslated lines are grouped into batches (based on the "MaxLengthOfRequests" setting in the configuration) and sent to the LLM API for translation.
- The translated lines are received and appended to the output file:
    - If the file doesn't exist yet, it will be created.
    - If it already exists, the new translations are added to the end.
- If an error occurs during translation (e.g., bad translations or API errors), you can manually delete the problematic lines in the output file and re-run the translation.
    - The tool will detect the missing lines and re-translate only those, avoiding redundant work.

**‚ö†Ô∏è Only use this function with files generated by the Generate Files function. Otherwise, it's very likely for errors to occur.**

---

### 3Ô∏è‚É£ Validate Files
Ensure translation quality by checking for inconsistencies:

1. Upload both the Original Language and New Language files.
2. Set the "From Language" and "To Language" values.
3. Click "Validate".

#### üìå How it works:
- The tool compares the values of the original and new language files.
- Some of things it identifies are missing or extra keys, incorrect placeholders, added or removed elements.
- Any issues found are logged in files within:
    "RootFolderOfTheTranslationTool/Files/Validations/"

## üîß Configuration Guide
Customize the tool's behavior by editing appsettings.json:

- API Settings:
    - Url: Url of the API.
    - Model: Model of the API you want to use.
    - ApiKey: Your API kay.

- Requests Settings:
    - MaxConcurrentRequests: The maximum number of simultaneous translation requests to send to the LLM.
    - MaxLengthOfRequests: The maximum number of lines per request, if possible, the tool will try to not go over this number.
    - TimeoutSeconds: The timeout for each API request.

## üìù License
This project is licensed under the Creative Commons Attribution-NonCommercial 4.0 International License (CC BY-NC 4.0).
You are free to download, modify, and redistribute this project, provided you give appropriate credit to this repository. Commercial use is not allowed.